{"ast":null,"code":"import _Promise from \"@babel/runtime-corejs2/core-js/promise\";\nimport _BackTop from \"antd/lib/back-top\";\nimport _Row from \"antd/lib/row\";\nimport _Affix from \"antd/lib/affix\";\nimport _Col from \"antd/lib/col\";\nimport _Tag from \"antd/lib/tag\";\nimport _Icon from \"antd/lib/icon\";\nimport _Layout from \"antd/lib/layout\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect, useContext } from 'react';\nimport Head from 'next/head';\nimport servicePath from '../config/apiUrl';\nimport User from '../components/User';\nimport axios from 'axios';\nimport marked from 'marked';\nimport hljs from \"highlight.js\";\nimport 'highlight.js/styles/monokai-sublime.css';\nimport 'markdown-navbar/dist/navbar.css';\nimport Tocify from '../components/tocify.tsx';\nimport { withRouter } from 'next/router';\nimport Edit from '../components/Edit';\nconst {\n  Content\n} = _Layout;\n\nconst Detail = props => {\n  const renderer = new marked.Renderer();\n  const tocify = new Tocify();\n\n  renderer.heading = function (text, level, raw) {\n    const anchor = tocify.add(text, level);\n    return `<a id=\"${anchor}\" href=\"#${anchor}\" class=\"anchor-fix\"><h${level}>${text}</h${level}></a>\\n`;\n  };\n\n  marked.setOptions({\n    renderer: renderer,\n    gfm: true,\n    pedantic: false,\n    sanitize: false,\n    tables: true,\n    breaks: false,\n    smartLists: true,\n    smartypants: false,\n    highlight: function (code) {\n      return hljs.highlightAuto(code).value;\n    }\n  });\n  console.log('props', props);\n  let html = marked(props.content);\n  useEffect(() => {\n    const user_id = localStorage.getItem('user_id');\n  }, []);\n  return __jsx(_Layout, null, __jsx(Head, null, __jsx(\"title\", null, \"\\u535A\\u4EBA\\u5802-\", props.title)), __jsx(Content, {\n    className: \"content\"\n  }, __jsx(_Row, {\n    type: \"flex\",\n    justify: \"center\"\n  }, __jsx(_Col, {\n    xs: 24,\n    sm: 24,\n    md: 24,\n    lg: 19,\n    xl: 19\n  }, __jsx(\"div\", {\n    className: \"comm-left\"\n  }, __jsx(\"div\", {\n    className: \"detailed-title\"\n  }, props.title), __jsx(\"div\", {\n    className: \"list-icon\"\n  }, __jsx(\"span\", null, __jsx(_Icon, {\n    type: \"calendar\"\n  }), \" \", props.created_at), __jsx(\"span\", null, __jsx(_Icon, {\n    type: \"folder\"\n  }), \" \", props.category.category_name), __jsx(\"span\", null, __jsx(_Icon, {\n    type: \"fire\"\n  }), \" \", props.watches, \"\\u4EBA\")), __jsx(\"div\", {\n    className: \"detailed-content\",\n    dangerouslySetInnerHTML: {\n      __html: html\n    }\n  }), __jsx(\"div\", {\n    className: \"tags\",\n    style: {\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      alignItems: \"center\",\n      padding: '10px 20px'\n    }\n  }, __jsx(\"div\", null, __jsx(_Icon, {\n    type: \"tags\",\n    theme: \"filled\",\n    style: {\n      marginRight: 12,\n      fontSize: 16\n    }\n  }), props.tags && props.tags.map(tag => __jsx(_Tag, {\n    key: tag,\n    color: \"orange\"\n  }, tag))), __jsx(Edit, {\n    user_id: props.user.id,\n    article_id: props.id\n  })))), __jsx(_Col, {\n    xs: 0,\n    sm: 0,\n    md: 0,\n    lg: 5,\n    xl: 5\n  }, __jsx(User, {\n    user: props.user\n  }), props.category.category_name == \"教程\" && __jsx(_Affix, {\n    style: {\n      marginTop: 20\n    },\n    offsetTop: 0\n  }, __jsx(\"div\", {\n    className: \"detailed-nav comm-box1\"\n  }, __jsx(\"div\", {\n    className: \"toc-list\"\n  }, tocify && tocify.render())))))), __jsx(_BackTop, null));\n};\n\nDetail.getInitialProps = async context => {\n  console.log('context', context);\n  let id = context.ctx.query.id;\n  const promise = new _Promise(resolve => {\n    axios(servicePath.getArticleDetail + id).then(res => {\n      resolve(res.data.data);\n    });\n  });\n  return await promise;\n};\n\nexport default withRouter(Detail);","map":{"version":3,"sources":["/Users/mac/Desktop/liy-blog/pages/detail.js"],"names":["React","useState","useEffect","useContext","Head","servicePath","User","axios","marked","hljs","Tocify","withRouter","Edit","Content","Detail","props","renderer","Renderer","tocify","heading","text","level","raw","anchor","add","setOptions","gfm","pedantic","sanitize","tables","breaks","smartLists","smartypants","highlight","code","highlightAuto","value","console","log","html","content","user_id","localStorage","getItem","title","created_at","category","category_name","watches","__html","display","justifyContent","alignItems","padding","marginRight","fontSize","tags","map","tag","user","id","marginTop","render","getInitialProps","context","ctx","query","promise","resolve","getArticleDetail","then","res","data"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react'\nimport Head from 'next/head'\nimport { Layout, Row, Col, Icon, Affix, BackTop, Tag, Button } from 'antd';\nimport servicePath from '../config/apiUrl';\nimport User from '../components/User'\nimport axios from 'axios'\nimport marked from 'marked'\nimport hljs from \"highlight.js\";\nimport 'highlight.js/styles/monokai-sublime.css';\nimport 'markdown-navbar/dist/navbar.css';\nimport Tocify from '../components/tocify.tsx'\n\nimport { withRouter} from 'next/router'\nimport Edit from '../components/Edit';\n\n\nconst { Content } = Layout;\nconst Detail = (props) => {\n    const renderer = new marked.Renderer();\n    const tocify = new Tocify()\n    renderer.heading = function (text, level, raw) {\n        const anchor = tocify.add(text, level);\n        return `<a id=\"${anchor}\" href=\"#${anchor}\" class=\"anchor-fix\"><h${level}>${text}</h${level}></a>\\n`;\n    };\n\n\n    marked.setOptions({\n        renderer: renderer,\n        gfm: true,\n        pedantic: false,\n        sanitize: false,\n        tables: true,\n        breaks: false,\n        smartLists: true,\n        smartypants: false,\n        highlight: function (code) {\n            return hljs.highlightAuto(code).value;\n        }\n    });\n    console.log('props',props)\n    let html = marked(props.content)\n\n    useEffect(() => {\n        const user_id = localStorage.getItem('user_id')\n    },[])\n    \n    return (\n        <Layout>\n            <Head>\n                <title>博人堂-{props.title}</title>\n            </Head>\n\n            <Content className=\"content\">\n                <Row type=\"flex\" justify=\"center\">\n                    <Col xs={24} sm={24} md={24} lg={19} xl={19}>\n                        <div className=\"comm-left\">\n                            <div className=\"detailed-title\">\n                                {props.title}\n                            </div>\n\n                            <div className=\"list-icon\">\n                                <span><Icon type=\"calendar\" /> {props.created_at}</span>\n                                <span><Icon type=\"folder\" /> {props.category.category_name}</span>\n                                <span><Icon type=\"fire\" /> {props.watches}人</span>\n                            </div>\n\n                            <div className=\"detailed-content\"\n                                dangerouslySetInnerHTML={{ __html: html }}   >\n                            </div>\n                            <div className=\"tags\" style={{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",padding:'10px 20px'}}>\n                                <div>\n                                <Icon type=\"tags\" theme=\"filled\" style={{ marginRight: 12, fontSize: 16 }} />\n                                {\n                                    props.tags &&\n                                    props.tags.map(tag => (\n                                            <Tag key={tag} color=\"orange\">{tag}</Tag>\n                                    ))\n                                }\n                                </div>\n\n                                <Edit user_id={props.user.id} article_id={props.id} />\n                            </div>\n                        </div>\n                    </Col>\n                    <Col xs={0} sm={0} md={0} lg={5} xl={5}>\n                        <User user={props.user} />\n                        {props.category.category_name == \"教程\" && <Affix style={{ marginTop: 20 }} offsetTop={0}>\n                            <div className=\"detailed-nav comm-box1\">\n                                <div className=\"toc-list\">\n                                    {tocify && tocify.render()}\n                                </div>\n                            </div>\n                        </Affix>}\n                    </Col>\n                </Row>\n            </Content>\n            <BackTop />\n\n        </Layout>\n    )\n}\n\nDetail.getInitialProps = async (context) => {\n    console.log('context',context)\n    let id = context.ctx.query.id\n    const promise = new Promise((resolve) => {\n        axios(servicePath.getArticleDetail + id).then(\n            (res) => {\n                resolve(res.data.data)\n            }\n        )\n    })\n\n    return await promise\n}\n\n\n\nexport default withRouter(Detail)"]},"metadata":{},"sourceType":"module"}