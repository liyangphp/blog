{"ast":null,"code":"import _List from \"antd/lib/list\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Router from 'next/router';\nimport servicePath from '../config/apiUrl';\n\nvar TeachList = function TeachList(_ref) {\n  var keywords = _ref.keywords,\n      labels = _ref.labels;\n\n  var _useState = useState(true),\n      isLoading = _useState[0],\n      setIsLoading = _useState[1];\n\n  var _useState2 = useState(1),\n      page = _useState2[0],\n      setPage = _useState2[1];\n\n  var _useState3 = useState(9),\n      pageSize = _useState3[0],\n      setPageSize = _useState3[1];\n\n  var _useState4 = useState(0),\n      total = _useState4[0],\n      setTotal = _useState4[1];\n\n  var _useState5 = useState([]),\n      listData = _useState5[0],\n      setListData = _useState5[1];\n\n  var getArticles = function getArticles(page, labels, keywords) {\n    var CancelToken = axios.CancelToken;\n    var source = CancelToken.source();\n    var dataProps = '?category_id=3';\n    dataProps += '&pageSize=' + pageSize;\n    dataProps += '&page=' + page;\n\n    if (keywords != '') {\n      dataProps += '&q=' + keywords;\n    }\n\n    if (labels != '') {\n      dataProps += '&biaoqian=' + labels;\n    }\n\n    axios({\n      method: 'get',\n      url: servicePath.getArticleList + dataProps,\n      cancelToken: source.token\n    }).then(function (res) {\n      setIsLoading(false);\n      console.log(res.data.data);\n      source.cancel('方法被取消');\n\n      for (var item in res.data.data) {\n        res.data.data[item].biaoqian = res.data.data[item].biaoqian.split(\",\");\n        res.data.data[item].labes = res.data.data[item].biaoqian[0];\n        res.data.data[item].href = \"/detail?id=\" + res.data.data[item].id;\n      }\n\n      setListData(res.data.data);\n      setTotal(res.data.meta.total);\n    })[\"catch\"](function (error) {\n      console.log(error);\n    });\n  };\n\n  useEffect(function () {\n    if (isLoading) {\n      getArticles(page, labels, keywords);\n    }\n  }, [page, labels]);\n  return __jsx(React.Fragment, null, __jsx(_List, {\n    style: {\n      margin: '0 auto'\n    },\n    itemLayout: \"vertical\",\n    size: \"large\",\n    pagination: {\n      onChange: function onChange(page) {\n        console.log(page);\n      },\n      pageSize: 6\n    },\n    dataSource: listData,\n    renderItem: function renderItem(item) {\n      return __jsx(_List.Item, {\n        key: item.title,\n        className: \"list-item\",\n        style: {\n          position: 'relative',\n          cursor: 'pointer',\n          padding: '0px 0 !important',\n          borderBottom: 'none'\n        },\n        onClick: function onClick() {\n          window.location.href = item.href;\n        }\n      }, __jsx(_List.Item.Meta, {\n        style: {\n          alignItems: 'stretch',\n          backgroundColor: '#fff',\n          marginTop: '1rem',\n          borderBottom: 'none',\n          borderRadius: 10,\n          padding: 32\n        },\n        onClick: function onClick() {\n          window.location.href = item.href;\n        },\n        avatar: __jsx(\"div\", {\n          className: \"img\"\n        }, __jsx(\"img\", {\n          width: '182px',\n          alt: \"logo\",\n          src: item.fmt\n        })),\n        title: __jsx(\"a\", {\n          style: {\n            marginLeft: '1rem'\n          },\n          href: item.href\n        }, item.title),\n        description: __jsx(\"div\", {\n          style: {\n            display: 'flex',\n            flexDirection: 'column',\n            justifyContent: 'space-between',\n            flex: 5,\n            marginLeft: '1rem',\n            height: '100%'\n          }\n        }, __jsx(\"div\", {\n          className: \"txt\"\n        }, __jsx(\"div\", {\n          className: \"con\",\n          dangerouslySetInnerHTML: {\n            __html: item.desc\n          }\n        })), __jsx(\"div\", {\n          style: {\n            width: '100%',\n            display: 'flex',\n            flexDirection: 'row',\n            justifyContent: 'space-between',\n            alignItems: 'center'\n          }\n        }, __jsx(\"div\", {\n          className: \"remark\"\n        }, __jsx(\"img\", {\n          style: {\n            borderRadius: '50%'\n          },\n          src: item.user.avatar\n        }), __jsx(\"div\", {\n          className: \"member\"\n        }, item.user.name), __jsx(\"div\", {\n          className: \"title\"\n        }, \"\\u53D1\\u5E03\\u65F6\\u95F4\"), __jsx(\"div\", {\n          className: \"time\"\n        }, item.created_at)), __jsx(\"a\", {\n          className: \"see-more\"\n        }, \"\\u67E5\\u770B\\u8BFE\\u7A0B\")))\n      }), __jsx(\"div\", {\n        className: \"classifybox\"\n      }, __jsx(\"div\", {\n        className: \"classify\"\n      }, item.labes)));\n    }\n  }));\n};\n\nexport default TeachList;","map":{"version":3,"sources":["/Users/mac/Desktop/liy-blog/components/TeachList.jsx"],"names":["React","useState","useEffect","axios","Router","servicePath","TeachList","keywords","labels","isLoading","setIsLoading","page","setPage","pageSize","setPageSize","total","setTotal","listData","setListData","getArticles","CancelToken","source","dataProps","method","url","getArticleList","cancelToken","token","then","res","console","log","data","cancel","item","biaoqian","split","labes","href","id","meta","error","margin","onChange","title","position","cursor","padding","borderBottom","window","location","alignItems","backgroundColor","marginTop","borderRadius","fmt","marginLeft","display","flexDirection","justifyContent","flex","height","__html","desc","width","user","avatar","name","created_at"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport { List, Icon } from 'antd'\nimport Router from 'next/router'\nimport servicePath from '../config/apiUrl';\n\n\n\nconst TeachList = ({keywords,labels}) => {\n    const [isLoading, setIsLoading] = useState(true)\n    const [page, setPage] = useState(1)\n    const [pageSize, setPageSize] = useState(9)\n    const [total, setTotal] = useState(0)\n    const [listData, setListData] = useState([]);\n    const getArticles = (page, labels, keywords) => {\n        const CancelToken = axios.CancelToken;\n        const source = CancelToken.source();\n\n        let dataProps = '?category_id=3';\n        dataProps += '&pageSize=' + pageSize;\n        dataProps += '&page=' + page;\n        if (keywords != '') {\n            dataProps += '&q=' + keywords\n        }\n\n        if (labels != '') {\n            dataProps += '&biaoqian=' + labels\n        }\n        axios({\n            method: 'get',\n            url: servicePath.getArticleList + dataProps,\n            cancelToken: source.token,\n        }).then(\n            res => {\n                setIsLoading(false)\n                console.log(res.data.data)\n                source.cancel('方法被取消');\n                for (let item in res.data.data) {\n                    res.data.data[item].biaoqian = res.data.data[item].biaoqian.split(\",\");\n                    res.data.data[item].labes = res.data.data[item].biaoqian[0];\n                    res.data.data[item].href = \"/detail?id=\" + res.data.data[item].id\n\n                }\n                setListData(res.data.data)\n                setTotal(res.data.meta.total)\n            }\n        ).catch(function (error) {\n            console.log(error)\n        });\n    }\n\n    useEffect(() => {\n        if (isLoading) {\n            getArticles(page,labels, keywords)\n        }\n    },[page, labels])\n\n\n\n    return (\n        <>\n            <List style={{ margin: '0 auto' }}\n                itemLayout=\"vertical\"\n                size=\"large\"\n                pagination={{\n                    onChange: page => {\n                        console.log(page);\n                    },\n                    pageSize: 6,\n                }}\n                dataSource={listData}\n                renderItem={item => (\n                    <List.Item key={item.title} className=\"list-item\" style={{ position: 'relative', cursor: 'pointer',    padding: '0px 0 !important', borderBottom:'none' }} onClick={() => { window.location.href = item.href }}>\n                        <List.Item.Meta style={{ alignItems: 'stretch', backgroundColor: '#fff', marginTop: '1rem', borderBottom: 'none', borderRadius: 10, padding: 32, }} onClick={() => { window.location.href = item.href }}\n                            avatar={<div className=\"img\"><img\n                                width={'182px'}\n                                alt=\"logo\"\n                                src={item.fmt}\n                            /></div>}\n                            title={<a style={{marginLeft:'1rem'}} href={item.href}>{item.title}</a>}\n                            description={<div style={{ display: 'flex', flexDirection: 'column', justifyContent: 'space-between', flex: 5 , marginLeft:'1rem',height:'100%'}}>\n                                <div className=\"txt\">\n                                    <div className=\"con\" dangerouslySetInnerHTML={{ __html: item.desc }} />\n                                </div>\n                                <div style={{ width: '100%', display: 'flex', flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center' }}>\n                                    <div className=\"remark\">\n                                        <img style={{ borderRadius: '50%' }} src={item.user.avatar} />\n                                        <div className=\"member\">{item.user.name}</div>\n                                        <div className=\"title\">发布时间</div>\n                                        <div className=\"time\">{item.created_at}</div>\n                                    </div>\n                                    <a className=\"see-more\">查看课程</a>\n                                </div>\n                            </div>}\n                        />\n\n                        <div className=\"classifybox\">\n                            <div className=\"classify\">{item.labes}</div>\n                        </div>\n\n                    </List.Item>\n                )}\n            />\n        </>\n    )\n}\n\nexport default TeachList"]},"metadata":{},"sourceType":"module"}