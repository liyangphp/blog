{"ast":null,"code":"import _Upload from \"antd/lib/upload\";\nimport _Button from \"antd/lib/button\";\nimport _Icon from \"antd/lib/icon\";\nimport _Tag from \"antd/lib/tag\";\nimport _Form from \"antd/lib/form\";\nimport _Input from \"antd/lib/input\";\nimport _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nimport _message from \"antd/lib/message\";\nimport _Select from \"antd/lib/select\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useRef, useState } from 'react';\nimport axios from \"axios\";\nimport servicePath from '../config/apiUrl';\nvar Option = _Select.Option;\n\nvar BaseView = function BaseView() {\n  var newTag = useRef(null);\n\n  var _useState = useState(),\n      user = _useState[0],\n      setUser = _useState[1];\n\n  var _useState2 = useState(true),\n      isLoading = _useState2[0],\n      setIsLoading = _useState2[1];\n\n  var _useState3 = useState(),\n      inputValue = _useState3[0],\n      setinputValue = _useState3[1];\n\n  var _useState4 = useState(false),\n      inputVisible = _useState4[0],\n      setInputVisible = _useState4[1];\n\n  var _useState5 = useState([]),\n      newTags = _useState5[0],\n      setNewTags = _useState5[1];\n\n  var _useState6 = useState(),\n      avatar = _useState6[0],\n      setAvatar = _useState6[1];\n\n  var _useState7 = useState(),\n      email = _useState7[0],\n      setEmail = _useState7[1];\n\n  var _useState8 = useState(),\n      nickname = _useState8[0],\n      setNickname = _useState8[1];\n\n  var _useState9 = useState(),\n      introduce = _useState9[0],\n      setIntroduce = _useState9[1];\n\n  var _useState10 = useState(),\n      professional = _useState10[0],\n      setProfessional = _useState10[1];\n\n  var _useState11 = useState(),\n      company = _useState11[0],\n      setCompany = _useState11[1];\n\n  var _useState12 = useState(),\n      provinceId = _useState12[0],\n      setProvinceId = _useState12[1];\n\n  var _useState13 = useState(),\n      cityId = _useState13[0],\n      setCityId = _useState13[1];\n\n  var _useState14 = useState(),\n      provinceData = _useState14[0],\n      setProvinceData = _useState14[1];\n\n  var _useState15 = useState(),\n      cityData = _useState15[0],\n      setCityData = _useState15[1];\n\n  var _useState16 = useState(),\n      cities = _useState16[0],\n      setCities = _useState16[1];\n\n  var _useState17 = useState(),\n      secondCity = _useState17[0],\n      setSecondCity = _useState17[1];\n\n  var _useState18 = useState(),\n      token = _useState18[0],\n      setToken = _useState18[1];\n\n  var getProvinces = function getProvinces(provinceId) {\n    var CancelToken = axios.CancelToken;\n    var source = CancelToken.source();\n    axios({\n      method: 'get',\n      url: servicePath.getProvinces,\n      withCredentials: false,\n      cancelToken: source.token\n    }).then(function (res) {\n      source.cancel('方法被取消');\n      console.log('qweqweqw', res.data);\n      var defualt = '';\n\n      for (var i = 0; i < res.data.length; i++) {\n        if (provinceId && res.data[i].id == provinceId) {\n          defualt = res.data[i].name;\n        }\n      }\n\n      if (res.data) {\n        setProvinceData(__jsx(_Select, {\n          defaultValue: defualt == '' ? res.data[0].name : defualt,\n          style: {\n            width: 120\n          },\n          onChange: handleProvinceChange\n        }, res.data.map(function (province) {\n          return __jsx(Option, {\n            key: province.id\n          }, province.name);\n        })));\n      }\n    })[\"catch\"](function (error) {\n      console.log(error);\n    });\n  };\n\n  var getCity = function getCity(id, cityId) {\n    var CancelToken = axios.CancelToken;\n    var source = CancelToken.source();\n    axios({\n      method: 'get',\n      url: servicePath.getCity + '?id=' + id,\n      withCredentials: false,\n      cancelToken: source.token\n    }).then(function (res) {\n      setCities(res.data[0].children);\n      setCityData(res.data[0].children.map(function (city) {\n        return __jsx(Option, {\n          key: city.id\n        }, city.name);\n      }));\n      setSecondCity(res.data[0].children[0]);\n\n      for (var item in res.data[0].children) {\n        console.log('1', res.data[0].children[item].id);\n        console.log('2', cityId);\n\n        if (res.data[0].children[item].id == cityId) {\n          setSecondCity(res.data[0].children[item]);\n        }\n      }\n\n      source.cancel('方法被取消');\n    })[\"catch\"](function (error) {\n      console.log(error);\n    });\n  }; //获取会员数据\n\n\n  var checkLogin = function checkLogin() {\n    var CancelToken = axios.CancelToken;\n    var source = CancelToken.source();\n\n    if (token != null) {\n      axios({\n        method: 'get',\n        url: servicePath.getUserInfo,\n        headers: {\n          'Authorization': 'Bearer ' + token\n        },\n        withCredentials: false,\n        cancelToken: source.token,\n        transformResponse: function transformResponse(data) {\n          if (data.indexOf('errors') != -1) {\n            data = JSON.parse(data);\n\n            for (var item in data.errors) {\n              _message.error(data.errors[item][0]);\n            }\n          } else if (data.indexOf('Unauthenticated') != -1) {\n            localStorage.removeItem('token');\n            return data;\n          } else {\n            return data;\n          }\n        }\n      }).then(function (res) {\n        source.cancel('方法被取消');\n        setIsLoading(false);\n        res.data = eval('(' + res.data + ')');\n        console.log('user', res.data.data);\n        setUser(res.data.data);\n        setIntroduce(res.data.data.introduction);\n        setAvatar(res.data.data.avatar);\n        setNickname(res.data.data.name);\n        setEmail(res.data.data.email);\n        getThird(res.data.data.id);\n      })[\"catch\"](function (error) {\n        console.log(error);\n      });\n    } else {\n      console.log('asasdas3');\n    }\n  };\n\n  var handlerSubmit = function handlerSubmit() {\n    var dataProps = {};\n    dataProps.email = email;\n    dataProps.nickname = nickname;\n    dataProps.introduction = introduce;\n    dataProps.avatar = avatar;\n    dataProps.tags = newTags.length > 0 ? newTags.join(',') : [];\n    dataProps.professional = professional;\n    dataProps.company = company;\n    dataProps.province_id = provinceId;\n    dataProps.city_id = cityId;\n    dataProps.user_id = user.id;\n    axios({\n      method: 'post',\n      url: servicePath.saveThird,\n      headers: {\n        'Authorization': 'Bearer ' + token\n      },\n      data: dataProps\n    }).then(function (res) {\n      console.log(res);\n\n      _message.success(res.data.msg);\n\n      window.location.href = \"/\";\n    });\n  };\n\n  var getThird = function getThird(id) {\n    axios({\n      method: 'get',\n      url: servicePath.getThird + '?user_id=' + id,\n      headers: {\n        'Authorization': 'Bearer ' + token\n      }\n    }).then(function (res) {\n      if (res.data.data) {\n        console.log('third', res.data.data);\n        var arr = res.data.data.tags ? res.data.data.tags.split(\",\") : [];\n        console.log(arr);\n        setNewTags(arr);\n        setCompany(res.data.data.company);\n        setProfessional(res.data.data.professional);\n        setProvinceId(res.data.data.province_id);\n        setCityId(res.data.data.city_id);\n        console.log('province', provinceId);\n        getProvinces(res.data.data.province_id ? res.data.data.province_id : 1);\n        getCity(res.data.data.province_id ? res.data.data.province_id : 1, res.data.data.city_id ? res.data.data.city_id : 1);\n      }\n    });\n  };\n\n  var handleInputChange = function handleInputChange(e) {\n    setinputValue(e.target.value);\n  };\n\n  var handleInputConfirm = function handleInputConfirm() {\n    var arr = newTags;\n\n    if (inputValue && newTags.indexOf(inputValue) === -1) {\n      arr.push(inputValue);\n    }\n\n    setNewTags(arr);\n    setinputValue('');\n    setInputVisible(false);\n  };\n\n  var showInput = function showInput() {\n    setInputVisible(true);\n  };\n\n  var handleProvinceChange = function handleProvinceChange(value) {\n    setProvinceId(value);\n    getProvinces(provinceId);\n    getCity(provinceId, value);\n  };\n\n  var onSecondCityChange = function onSecondCityChange(value) {\n    setCityId(value);\n\n    for (var item in cities) {\n      console.log(_parseInt(cities[item]['id']) == value);\n\n      if (_parseInt(cities[item]['id']) == value) {\n        console.log(cities[item]);\n        setSecondCity(cities[item]);\n      }\n    }\n  };\n\n  var handleUploadChange = function handleUploadChange(_ref) {\n    var file = _ref.file;\n    console.log(file);\n\n    switch (file.status) {\n      case 'done':\n        _message.destroy();\n\n        _message.success('上传成功！'); // @ts-ignore\n\n\n        setAvatar(file.response.file_path);\n        break;\n\n      case 'error':\n        _message.destroy();\n\n        _message.error(file.response.message);\n\n        break;\n    }\n  };\n\n  useEffect(function () {\n    setToken(localStorage.getItem('token'));\n\n    if (isLoading) {\n      checkLogin();\n    }\n  }, []);\n  return __jsx(\"div\", {\n    className: \"baseView\"\n  }, __jsx(\"div\", {\n    className: \"left\"\n  }, __jsx(_Form, {\n    layout: \"vertical\",\n    hideRequiredMark: true\n  }, __jsx(_Form.Item, {\n    label: \"\\u90AE\\u7BB1\"\n  }, __jsx(_Input, {\n    onChange: function onChange(e) {\n      setEmail(e.target.value);\n    },\n    value: email\n  })), __jsx(_Form.Item, {\n    label: \"\\u6635\\u79F0\"\n  }, __jsx(_Input, {\n    onChange: function onChange(e) {\n      setNickname(e.target.value);\n    },\n    value: nickname\n  })), __jsx(_Form.Item, {\n    label: \"\\u4E2A\\u4EBA\\u7B80\\u4ECB\"\n  }, __jsx(_Input.TextArea, {\n    placeholder: \"\\u4E2A\\u4EBA\\u7B80\\u4ECB\",\n    rows: 4,\n    onChange: function onChange(e) {\n      setIntroduce(e.target.value);\n    },\n    value: introduce\n  })), __jsx(_Form.Item, {\n    label: \"\\u6807\\u7B7E\"\n  }, __jsx(\"div\", {\n    className: \"tags\",\n    style: {\n      lineHeight: '30px'\n    }\n  }, newTags && newTags.map(function (item) {\n    return __jsx(_Tag, {\n      key: item\n    }, item);\n  }), inputVisible && __jsx(_Input, {\n    ref: newTag,\n    type: \"text\",\n    size: \"small\",\n    style: {\n      width: 78\n    },\n    value: inputValue,\n    onChange: handleInputChange,\n    onBlur: handleInputConfirm,\n    onPressEnter: handleInputConfirm\n  }), !inputVisible && __jsx(_Tag, {\n    onClick: showInput,\n    style: {\n      background: '#fff',\n      borderStyle: 'dashed'\n    }\n  }, __jsx(_Icon, {\n    type: \"plus\"\n  })))), __jsx(_Form.Item, {\n    label: \"\\u804C\\u79F0\"\n  }, __jsx(_Input, {\n    onChange: function onChange(e) {\n      setProfessional(e.target.value);\n    },\n    value: professional\n  })), __jsx(_Form.Item, {\n    label: \"\\u516C\\u53F8\"\n  }, __jsx(_Input, {\n    onChange: function onChange(e) {\n      setCompany(e.target.value);\n    },\n    value: company\n  })), __jsx(_Form.Item, {\n    label: \"\\u6240\\u5728\\u57CE\\u5E02\"\n  }, provinceData, __jsx(_Select, {\n    style: {\n      width: 120,\n      marginLeft: 10\n    },\n    value: secondCity ? secondCity.name : '',\n    onChange: onSecondCityChange\n  }, cityData)), __jsx(_Button, {\n    type: \"primary\",\n    onClick: handlerSubmit\n  }, \"\\u66F4\\u65B0\\u4FE1\\u606F\"))), __jsx(\"div\", {\n    className: \"right\"\n  }, __jsx(\"div\", {\n    className: \"avatar_title\"\n  }, \"\\u7528\\u6237\\u5934\\u50CF\"), __jsx(\"div\", {\n    className: \"avatar\"\n  }, __jsx(\"img\", {\n    style: {\n      borderRadius: '50%'\n    },\n    src: avatar,\n    alt: \"avatar\"\n  })), __jsx(_Upload, {\n    accept: \"image/*\",\n    name: \"file\",\n    className: \"upload\",\n    action: servicePath.uploadArticleImage,\n    showUploadList: false,\n    headers: {\n      Authorization: 'Bearer ' + token\n    },\n    onChange: handleUploadChange\n  }, __jsx(\"div\", {\n    className: \"button_view\"\n  }, __jsx(_Button, {\n    icon: \"upload\"\n  }, \"\\u4E0A\\u4F20\\u5934\\u50CF\")))));\n};\n\nexport default BaseView;","map":{"version":3,"sources":["/Users/mac/Desktop/liy-blog/components/BaseView.jsx"],"names":["React","useEffect","useRef","useState","axios","servicePath","Option","BaseView","newTag","user","setUser","isLoading","setIsLoading","inputValue","setinputValue","inputVisible","setInputVisible","newTags","setNewTags","avatar","setAvatar","email","setEmail","nickname","setNickname","introduce","setIntroduce","professional","setProfessional","company","setCompany","provinceId","setProvinceId","cityId","setCityId","provinceData","setProvinceData","cityData","setCityData","cities","setCities","secondCity","setSecondCity","token","setToken","getProvinces","CancelToken","source","method","url","withCredentials","cancelToken","then","res","cancel","console","log","data","defualt","i","length","id","name","width","handleProvinceChange","map","province","error","getCity","children","city","item","checkLogin","getUserInfo","headers","transformResponse","indexOf","JSON","parse","errors","localStorage","removeItem","eval","introduction","getThird","handlerSubmit","dataProps","tags","join","province_id","city_id","user_id","saveThird","success","msg","window","location","href","arr","split","handleInputChange","e","target","value","handleInputConfirm","push","showInput","onSecondCityChange","handleUploadChange","file","status","destroy","response","file_path","message","getItem","lineHeight","background","borderStyle","marginLeft","borderRadius","uploadArticleImage","Authorization"],"mappings":"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","sourcesContent":["import React, {useEffect, useRef, useState} from 'react';\nimport {Button, Form, Input, Select, Upload, message, Tag, Icon, Modal} from 'antd';\nimport axios from \"axios\";\nimport servicePath from '../config/apiUrl';\n\nconst {Option} = Select;\n\n\nconst BaseView = () => {\n    const newTag = useRef(null)\n    const [user, setUser] = useState()\n    const [isLoading, setIsLoading] = useState(true)\n    const [inputValue, setinputValue] = useState()\n    const [inputVisible, setInputVisible] = useState(false)\n    const [newTags, setNewTags] = useState([])\n    const [avatar, setAvatar] = useState()\n    const [email, setEmail] = useState()\n    const [nickname, setNickname] = useState()\n    const [introduce, setIntroduce] = useState()\n    const [professional, setProfessional] = useState()\n    const [company, setCompany] = useState()\n    const [provinceId, setProvinceId] = useState()\n    const [cityId, setCityId] = useState()\n\n    const [provinceData, setProvinceData] = useState();\n\n    const [cityData, setCityData] = useState();\n\n    const [cities, setCities] = useState();\n\n    const [secondCity, setSecondCity] = useState()\n\n    const [token, setToken] = useState()\n\n\n    const getProvinces = (provinceId) => {\n        const CancelToken = axios.CancelToken;\n        const source = CancelToken.source();\n        axios({\n            method: 'get',\n            url: servicePath.getProvinces,\n            withCredentials: false,\n            cancelToken: source.token,\n        }).then(\n            res => {\n                source.cancel('方法被取消');\n                console.log('qweqweqw', res.data);\n                let defualt='';\n                for(let i=0;i<res.data.length;i++){\n                    if(provinceId && res.data[i].id==provinceId){\n                        defualt=res.data[i].name\n                    }\n                }\n\n\n\n                if (res.data) {\n                    setProvinceData(\n                        <Select\n                            defaultValue={defualt==''?res.data[0].name:defualt}\n                            style={{width: 120}}\n                            onChange={handleProvinceChange}\n                        >\n                            {res.data.map(province => (\n                                <Option key={province.id}>{province.name}</Option>\n                            ))}\n                        </Select>\n                    );\n\n\n                }\n\n            }\n        ).catch(function (error) {\n            console.log(error)\n        });\n\n    }\n\n    const getCity = (id,cityId) => {\n        const CancelToken = axios.CancelToken;\n        const source = CancelToken.source();\n        axios({\n            method: 'get',\n            url: servicePath.getCity+'?id=' + id,\n            withCredentials: false,\n            cancelToken: source.token,\n        }).then(\n            res => {\n                setCities(res.data[0].children)\n                setCityData(res.data[0].children.map(city => (\n                    <Option key={city.id}>{city.name}</Option>\n                )));\n\n                setSecondCity(res.data[0].children[0])\n\n                for (let item in res.data[0].children) {\n                    console.log('1',res.data[0].children[item].id)\n                    console.log('2',cityId)\n                    if (res.data[0].children[item].id == cityId) {\n                        setSecondCity(res.data[0].children[item])\n                    }\n                }\n\n\n\n                source.cancel('方法被取消');\n            }\n        ).catch(function (error) {\n            console.log(error)\n        });\n    }\n\n    //获取会员数据\n    const checkLogin = () => {\n        const CancelToken = axios.CancelToken;\n        const source = CancelToken.source();\n        if (token != null) {\n            axios({\n                method: 'get',\n                url: servicePath.getUserInfo,\n                headers: {\n                    'Authorization': 'Bearer ' + token,\n                },\n                withCredentials: false,\n                cancelToken: source.token,\n                transformResponse: function (data) {\n                    if (data.indexOf('errors') != -1) {\n                        data = JSON.parse(data);\n                        for (var item in data.errors) {\n                            message.error(data.errors[item][0]);\n                        }\n                    } else if (data.indexOf('Unauthenticated') != -1) {\n                        localStorage.removeItem('token')\n                        return data;\n                    } else {\n                        return data;\n                    }\n                }\n            }).then(\n                res => {\n                    source.cancel('方法被取消');\n                    setIsLoading(false)\n                    res.data = eval('(' + res.data + ')');\n                    console.log('user',res.data.data)\n                    setUser(res.data.data);\n                    setIntroduce(res.data.data.introduction)\n                    setAvatar(res.data.data.avatar)\n                    setNickname(res.data.data.name)\n                    setEmail(res.data.data.email)\n                    getThird(res.data.data.id)\n                }\n            ).catch(function (error) {\n                console.log(error)\n            });\n        } else {\n            console.log('asasdas3')\n        }\n    }\n\n    const handlerSubmit = () => {\n        let dataProps = {}\n        dataProps.email = email;\n        dataProps.nickname = nickname;\n        dataProps.introduction = introduce;\n        dataProps.avatar = avatar;\n        dataProps.tags = newTags.length>0 ? newTags.join(',') : [];\n        dataProps.professional = professional;\n        dataProps.company = company;\n        dataProps.province_id = provinceId;\n        dataProps.city_id = cityId;\n        dataProps.user_id=user.id;\n        axios({\n            method: 'post',\n            url: servicePath.saveThird,\n            headers: {\n                'Authorization': 'Bearer ' + token,\n            },\n            data: dataProps\n        }).then(res => {\n            console.log(res);\n            message.success(res.data.msg)\n            window.location.href=\"/\"\n        })\n    }\n\n    const getThird = (id) =>{\n        axios({\n            method: 'get',\n            url: servicePath.getThird+'?user_id='+id,\n            headers: {\n                'Authorization': 'Bearer ' + token,\n            },\n        }).then(res => {\n            if (res.data.data) {\n                console.log('third',res.data.data)\n                let arr = res.data.data.tags?res.data.data.tags.split(\",\"):[];\n                console.log(arr)\n                setNewTags(arr)\n                setCompany(res.data.data.company)\n                setProfessional(res.data.data.professional)\n                setProvinceId(res.data.data.province_id)\n                setCityId(res.data.data.city_id)\n                console.log('province',provinceId)\n                getProvinces(res.data.data.province_id?res.data.data.province_id:1)\n                getCity(res.data.data.province_id?res.data.data.province_id:1,res.data.data.city_id?res.data.data.city_id:1)\n\n            }\n        })\n    }\n\n    const handleInputChange = (e) => {\n        setinputValue(e.target.value)\n    }\n\n    const handleInputConfirm = () => {\n        let arr = newTags;\n        if (inputValue && newTags.indexOf(inputValue) === -1) {\n            arr.push(inputValue)\n        }\n        setNewTags(arr);\n        setinputValue('');\n        setInputVisible(false)\n    }\n\n    const showInput = () => {\n        setInputVisible(true)\n    }\n\n    const handleProvinceChange = value => {\n        setProvinceId(value);\n\n        getProvinces(provinceId)\n        getCity(provinceId,value)\n    };\n\n    const onSecondCityChange = value => {\n        setCityId(value)\n        for (let item in cities) {\n            console.log(parseInt(cities[item]['id']) == value)\n            if (parseInt(cities[item]['id']) == value) {\n                console.log(cities[item])\n                setSecondCity(cities[item])\n            }\n        }\n    };\n\n    const handleUploadChange = ({ file }) => {\n        console.log(file)\n        switch (file.status) {\n            case 'done':\n                message.destroy();\n                message.success('上传成功！');\n                // @ts-ignore\n                setAvatar(file.response.file_path)\n                break;\n            case 'error':\n                message.destroy();\n                message.error(file.response.message);\n                break;\n        }\n    };\n\n\n    useEffect(() => {\n        setToken(localStorage.getItem('token'))\n        if (isLoading) {\n            checkLogin()\n        }\n    },[])\n\n    return (\n        <div className=\"baseView\">\n            <div className=\"left\">\n                <Form layout=\"vertical\" hideRequiredMark>\n                    <Form.Item label=\"邮箱\">\n                        <Input onChange={(e) => {\n                            setEmail(e.target.value)\n                        }} value={email}/>\n                    </Form.Item>\n\n                    <Form.Item label=\"昵称\">\n                        <Input onChange={(e) => {\n                            setNickname(e.target.value)\n                        }} value={nickname}/>\n                    </Form.Item>\n\n                    <Form.Item label=\"个人简介\">\n                        <Input.TextArea\n                            placeholder=\"个人简介\"\n                            rows={4}\n                            onChange={(e) => {\n                                setIntroduce(e.target.value)\n                            }}\n                            value={introduce}\n                        />\n                    </Form.Item>\n\n                    <Form.Item label=\"标签\">\n                        <div className=\"tags\" style={{lineHeight:'30px'}}>\n                            {newTags && newTags.map(item => (<Tag key={item}>{item}</Tag>))}\n                            {inputVisible && (\n                                <Input\n                                    ref={newTag}\n                                    type=\"text\"\n                                    size=\"small\"\n                                    style={{width: 78}}\n                                    value={inputValue}\n                                    onChange={handleInputChange}\n                                    onBlur={handleInputConfirm}\n                                    onPressEnter={handleInputConfirm}\n                                />\n                            )}\n                            {!inputVisible && (<Tag\n                                    onClick={showInput}\n                                    style={{background: '#fff', borderStyle: 'dashed'}}>\n                                    <Icon type=\"plus\"/>\n                                </Tag>\n                            )}\n                        </div>\n                    </Form.Item>\n\n                    <Form.Item label=\"职称\">\n                        <Input onChange={(e) => {\n                            setProfessional(e.target.value)\n                        }} value={professional}/>\n                    </Form.Item>\n\n                    <Form.Item label=\"公司\">\n                        <Input onChange={(e) => {\n                            setCompany(e.target.value)\n                        }} value={company}/>\n                    </Form.Item>\n\n                    <Form.Item label=\"所在城市\">\n                        {provinceData}\n                        <Select\n                            style={{width: 120, marginLeft: 10}}\n                            value={secondCity ? secondCity.name : ''}\n                            onChange={onSecondCityChange}>\n                            {cityData}\n                        </Select>\n                    </Form.Item>\n\n                    <Button type=\"primary\" onClick={handlerSubmit}>\n                        更新信息\n                    </Button>\n\n                </Form>\n            </div>\n            <div className=\"right\">\n                <div className=\"avatar_title\">\n                    用户头像\n                </div>\n\n                <div className=\"avatar\">\n                    <img style={{borderRadius:'50%'}} src={avatar} alt=\"avatar\"/>\n                </div>\n\n\n                <Upload\n                    accept=\"image/*\"\n                    name=\"file\"\n                    className=\"upload\"\n                    action={servicePath.uploadArticleImage}\n                    showUploadList={false}\n                    headers={{Authorization: 'Bearer ' + token}}\n                    onChange={handleUploadChange}\n                >\n\n                    <div className=\"button_view\">\n                        <Button icon=\"upload\">\n                            上传头像\n                        </Button>\n                    </div>\n\n                </Upload>\n            </div>\n        </div>\n    )\n}\nexport default BaseView\n"]},"metadata":{},"sourceType":"module"}