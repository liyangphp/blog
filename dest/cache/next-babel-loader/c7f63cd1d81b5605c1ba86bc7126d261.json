{"ast":null,"code":"import _Tooltip from \"antd/lib/tooltip\";\nimport _Icon from \"antd/lib/icon\";\nimport _message from \"antd/lib/message\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect, useContext } from 'react';\nimport axios from 'axios';\nimport { ItemContext } from './Comments';\nimport servicePath from '../config/apiUrl';\n\nconst Star = ({\n  auth\n}) => {\n  const item = useContext(ItemContext);\n  const {\n    0: start,\n    1: setStart\n  } = useState(item.likes);\n  const {\n    0: action,\n    1: setAction\n  } = useState('like');\n\n  const like = () => {\n    let dataProps = {};\n    dataProps.article_id = 0;\n    dataProps.user_id = auth.id;\n    dataProps.reply_id = item.id;\n    axios({\n      method: 'post',\n      url: servicePath.giveLike,\n      data: dataProps,\n      headers: {\n        'Authorization': 'Bearer ' + localStorage.getItem('token')\n      },\n      withCredentials: false\n    }).then(res => {\n      if (res.status == 204) {\n        let number = start - 1;\n        setStart(number);\n      } else {\n        let number = start + 1;\n        setStart(number);\n      }\n    }).catch(function (error) {\n      _message.error(error.status);\n    });\n  };\n\n  return __jsx(\"span\", {\n    key: \"comment-basic-like\"\n  }, __jsx(_Tooltip, {\n    title: \"Like\"\n  }, __jsx(_Icon, {\n    type: \"like\",\n    theme: action === 'liked' ? 'filled' : 'outlined',\n    onClick: like\n  })), __jsx(\"span\", {\n    style: {\n      paddingLeft: 8,\n      cursor: 'auto'\n    }\n  }, start));\n};\n\nexport default Star;","map":{"version":3,"sources":["/Users/mac/Desktop/liy-blog/components/Star.jsx"],"names":["React","useState","useEffect","useContext","axios","ItemContext","servicePath","Star","auth","item","start","setStart","likes","action","setAction","like","dataProps","article_id","user_id","id","reply_id","method","url","giveLike","data","headers","localStorage","getItem","withCredentials","then","res","status","number","catch","error","paddingLeft","cursor"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,UAArC,QAAuD,OAAvD;AAEA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,YAA5B;AACA,OAAOC,WAAP,MAAwB,kBAAxB;;AACA,MAAMC,IAAI,GAAG,CAAC;AAACC,EAAAA;AAAD,CAAD,KAAY;AACrB,QAAMC,IAAI,GAAIN,UAAU,CAACE,WAAD,CAAxB;AACA,QAAM;AAAA,OAACK,KAAD;AAAA,OAAQC;AAAR,MAAmBV,QAAQ,CAACQ,IAAI,CAACG,KAAN,CAAjC;AACA,QAAM;AAAA,OAACC,MAAD;AAAA,OAASC;AAAT,MAAsBb,QAAQ,CAAC,MAAD,CAApC;;AACA,QAAMc,IAAI,GAAC,MAAI;AACX,QAAIC,SAAS,GAAC,EAAd;AACAA,IAAAA,SAAS,CAACC,UAAV,GAAqB,CAArB;AACAD,IAAAA,SAAS,CAACE,OAAV,GAAkBV,IAAI,CAACW,EAAvB;AACAH,IAAAA,SAAS,CAACI,QAAV,GAAmBX,IAAI,CAACU,EAAxB;AACAf,IAAAA,KAAK,CAAC;AACFiB,MAAAA,MAAM,EAAE,MADN;AAEFC,MAAAA,GAAG,EAAEhB,WAAW,CAACiB,QAFf;AAGFC,MAAAA,IAAI,EAACR,SAHH;AAIFS,MAAAA,OAAO,EAAE;AACL,yBAAiB,YAAYC,YAAY,CAACC,OAAb,CAAqB,OAArB;AADxB,OAJP;AAOFC,MAAAA,eAAe,EAAE;AAPf,KAAD,CAAL,CAQGC,IARH,CASIC,GAAG,IAAI;AACH,UAAGA,GAAG,CAACC,MAAJ,IAAY,GAAf,EAAmB;AACf,YAAIC,MAAM,GAACtB,KAAK,GAAC,CAAjB;AACAC,QAAAA,QAAQ,CAACqB,MAAD,CAAR;AACH,OAHD,MAGK;AACD,YAAIA,MAAM,GAACtB,KAAK,GAAC,CAAjB;AACAC,QAAAA,QAAQ,CAACqB,MAAD,CAAR;AACH;AACJ,KAjBL,EAkBEC,KAlBF,CAkBQ,UAAUC,KAAV,EAAiB;AACrB,eAAQA,KAAR,CAAcA,KAAK,CAACH,MAApB;AACH,KApBD;AAqBH,GA1BD;;AA2BA,SACI;AAAM,IAAA,GAAG,EAAC;AAAV,KACI;AAAS,IAAA,KAAK,EAAC;AAAf,KACI;AACI,IAAA,IAAI,EAAC,MADT;AAEI,IAAA,KAAK,EAAElB,MAAM,KAAK,OAAX,GAAqB,QAArB,GAAgC,UAF3C;AAGI,IAAA,OAAO,EAAEE;AAHb,IADJ,CADJ,EAQI;AAAM,IAAA,KAAK,EAAE;AAAEoB,MAAAA,WAAW,EAAE,CAAf;AAAkBC,MAAAA,MAAM,EAAE;AAA1B;AAAb,KAAkD1B,KAAlD,CARJ,CADJ;AAYH,CA3CD;;AA6CA,eAAeH,IAAf","sourcesContent":["import React, { useState, useEffect, useContext } from 'react'\nimport { message, Icon, Comment, List, Tooltip } from 'antd'\nimport axios from 'axios'\nimport { ItemContext } from './Comments'\nimport servicePath from '../config/apiUrl';\nconst Star = ({auth}) => {\n    const item  = useContext(ItemContext)\n    const [start, setStart] =useState(item.likes)\n    const [action, setAction] = useState('like')\n    const like=()=>{\n        let dataProps={}\n        dataProps.article_id=0;\n        dataProps.user_id=auth.id;\n        dataProps.reply_id=item.id;\n        axios({\n            method: 'post',\n            url: servicePath.giveLike,\n            data:dataProps,\n            headers: {\n                'Authorization': 'Bearer ' + localStorage.getItem('token'),\n            },\n            withCredentials: false,\n        }).then(\n            res => {\n                if(res.status==204){\n                    let number=start-1;\n                    setStart(number);\n                }else{\n                    let number=start+1;\n                    setStart(number);\n                }\n            }\n        ).catch(function (error) {\n            message.error(error.status)\n        });\n    };\n    return (\n        <span key=\"comment-basic-like\">\n            <Tooltip title=\"Like\">\n                <Icon\n                    type=\"like\"\n                    theme={action === 'liked' ? 'filled' : 'outlined'}\n                    onClick={like}\n                />\n            </Tooltip>\n            <span style={{ paddingLeft: 8, cursor: 'auto' }}>{start}</span>\n        </span>\n    )\n};\n\nexport default Star"]},"metadata":{},"sourceType":"module"}