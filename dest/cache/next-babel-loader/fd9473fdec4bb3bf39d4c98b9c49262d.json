{"ast":null,"code":"import _Card from \"antd/lib/card\";\nimport _List from \"antd/lib/list\";\nimport _Avatar from \"antd/lib/avatar\";\nimport _Icon from \"antd/lib/icon\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport servicePath from '../config/apiUrl';\nimport dynamic from 'next/dynamic';\nconst Ellipsis = dynamic(() => import(\"ant-design-pro/lib/Ellipsis\"), {\n  ssr: false //这个要加上,禁止使用 SSR\n  ,\n  loadableGenerated: {\n    webpack: () => [require.resolveWeak(\"ant-design-pro/lib/Ellipsis\")],\n    modules: [\"ant-design-pro/lib/Ellipsis\"]\n  }\n});\n\nconst Recommand = () => {\n  const {\n    0: list,\n    1: setList\n  } = useState();\n  const {\n    0: dataLoading,\n    1: setDataLoading\n  } = useState(true);\n\n  const getLastArticle = () => {\n    const CancelToken = axios.CancelToken;\n    const source = CancelToken.source();\n    axios({\n      method: 'get',\n      url: servicePath.getRecommandList + '?category_id=1',\n      cancelToken: source.token\n    }).then(res => {\n      setDataLoading(false);\n      console.log(res.data.data);\n      source.cancel('方法被取消');\n\n      for (let item in res.data.data) {\n        res.data.data[item].href = \"/detail?id=\" + res.data.data[item].id;\n      }\n\n      setList(res.data.data);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  useEffect(() => {\n    if (dataLoading) {\n      getLastArticle();\n    }\n  });\n  return __jsx(_Card, {\n    size: \"small\",\n    loading: dataLoading,\n    className: \"recommand\",\n    extra: __jsx(\"a\", {\n      className: \"extra\",\n      href: \"#\"\n    }, __jsx(_Icon, {\n      type: \"ellipsis\"\n    })),\n    title: __jsx(\"div\", {\n      className: \"title\"\n    }, __jsx(_Icon, {\n      type: \"share-alt\"\n    }), __jsx(\"span\", null, \"\\u6700\\u65B0\\u6587\\u7AE0\"))\n  }, __jsx(_List, {\n    dataSource: list,\n    renderItem: item => __jsx(_List.Item, {\n      className: \"re-item\",\n      key: item.id\n    }, __jsx(_List.Item.Meta, {\n      avatar: __jsx(_Avatar, {\n        style: {\n          borderRadius: '25%'\n        },\n        src: item.fmt\n      }),\n      title: __jsx(Ellipsis, {\n        lines: 2,\n        tooltip: true\n      }, __jsx(\"a\", {\n        className: \"btitle\",\n        href: item.href\n      }, item.title))\n    }))\n  }));\n};\n\nexport default Recommand;","map":{"version":3,"sources":["/Users/mac/Desktop/liy-blog/components/Recommand.jsx"],"names":["React","useState","useEffect","axios","servicePath","dynamic","Ellipsis","ssr","Recommand","list","setList","dataLoading","setDataLoading","getLastArticle","CancelToken","source","method","url","getRecommandList","cancelToken","token","then","res","console","log","data","cancel","item","href","id","catch","error","borderRadius","fmt","title"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AAEA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,WAAP,MAAwB,kBAAxB;AACA,OAAOC,OAAP,MAAoB,cAApB;AACA,MAAMC,QAAQ,GAAGD,OAAO,OACpB,OAAQ,6BAAR,CADoB,EAEpB;AACEE,EAAAA,GAAG,EAAE,KADP,CACe;AADf;AAAA;AAAA,wCADQ,6BACR;AAAA,cADQ,6BACR;AAAA;AAAA,CAFoB,CAAxB;;AAMA,MAAMC,SAAS,GAAG,MAAM;AACpB,QAAM;AAAA,OAACC,IAAD;AAAA,OAAOC;AAAP,MAAkBT,QAAQ,EAAhC;AACA,QAAM;AAAA,OAACU,WAAD;AAAA,OAAcC;AAAd,MAAgCX,QAAQ,CAAC,IAAD,CAA9C;;AACA,QAAMY,cAAc,GAAG,MAAK;AACxB,UAAMC,WAAW,GAAGX,KAAK,CAACW,WAA1B;AACA,UAAMC,MAAM,GAAGD,WAAW,CAACC,MAAZ,EAAf;AACAZ,IAAAA,KAAK,CAAC;AACFa,MAAAA,MAAM,EAAE,KADN;AAEFC,MAAAA,GAAG,EAAEb,WAAW,CAACc,gBAAZ,GAA6B,gBAFhC;AAGFC,MAAAA,WAAW,EAAEJ,MAAM,CAACK;AAHlB,KAAD,CAAL,CAIGC,IAJH,CAKIC,GAAG,IAAI;AACHV,MAAAA,cAAc,CAAC,KAAD,CAAd;AACAW,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAJ,CAASA,IAArB;AACAV,MAAAA,MAAM,CAACW,MAAP,CAAc,OAAd;;AACA,WAAI,IAAIC,IAAR,IAAgBL,GAAG,CAACG,IAAJ,CAASA,IAAzB,EAA8B;AAC1BH,QAAAA,GAAG,CAACG,IAAJ,CAASA,IAAT,CAAcE,IAAd,EAAoBC,IAApB,GAAyB,gBAAcN,GAAG,CAACG,IAAJ,CAASA,IAAT,CAAcE,IAAd,EAAoBE,EAA3D;AACH;;AACDnB,MAAAA,OAAO,CAACY,GAAG,CAACG,IAAJ,CAASA,IAAV,CAAP;AACH,KAbL,EAcEK,KAdF,CAcQ,UAAUC,KAAV,EAAiB;AACrBR,MAAAA,OAAO,CAACC,GAAR,CAAYO,KAAZ;AACH,KAhBD;AAiBH,GApBD;;AAuBA7B,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIS,WAAJ,EAAiB;AACbE,MAAAA,cAAc;AACjB;AACJ,GAJQ,CAAT;AAOA,SACI;AAAM,IAAA,IAAI,EAAC,OAAX;AAAmB,IAAA,OAAO,EAAEF,WAA5B;AAAyC,IAAA,SAAS,EAAC,WAAnD;AAA+D,IAAA,KAAK,EAAE;AAAG,MAAA,SAAS,EAAC,OAAb;AAAqB,MAAA,IAAI,EAAC;AAA1B,OAA8B;AAAM,MAAA,IAAI,EAAC;AAAX,MAA9B,CAAtE;AACA,IAAA,KAAK,EAAE;AAAK,MAAA,SAAS,EAAC;AAAf,OACH;AAAM,MAAA,IAAI,EAAC;AAAX,MADG,EAEH,+CAFG;AADP,KAKI;AACI,IAAA,UAAU,EAAEF,IADhB;AAEI,IAAA,UAAU,EAAEkB,IAAI,IACZ,YAAM,IAAN;AAAW,MAAA,SAAS,EAAC,SAArB;AAA+B,MAAA,GAAG,EAAEA,IAAI,CAACE;AAAzC,OACI,YAAM,IAAN,CAAW,IAAX;AACI,MAAA,MAAM,EACF;AAAQ,QAAA,KAAK,EAAE;AAAEG,UAAAA,YAAY,EAAE;AAAhB,SAAf;AAAwC,QAAA,GAAG,EAAEL,IAAI,CAACM;AAAlD,QAFR;AAII,MAAA,KAAK,EAAE,MAAC,QAAD;AAAU,QAAA,KAAK,EAAE,CAAjB;AAAoB,QAAA,OAAO;AAA3B,SAA4B;AAAG,QAAA,SAAS,EAAC,QAAb;AAAsB,QAAA,IAAI,EAAEN,IAAI,CAACC;AAAjC,SAAwCD,IAAI,CAACO,KAA7C,CAA5B;AAJX,MADJ;AAHR,IALJ,CADJ;AAqBH,CAtDD;;AAwDA,eAAe1B,SAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport {List, Card, Icon, Avatar } from 'antd'\nimport axios from 'axios'\nimport servicePath from '../config/apiUrl';\nimport dynamic from 'next/dynamic'\nconst Ellipsis = dynamic(\n    import (\"ant-design-pro/lib/Ellipsis\") ,\n    {\n      ssr: false   //这个要加上,禁止使用 SSR\n    }\n)\nconst Recommand = () => {\n    const [list, setList] = useState()\n    const [dataLoading, setDataLoading] = useState(true)\n    const getLastArticle = () =>{\n        const CancelToken = axios.CancelToken;\n        const source = CancelToken.source();\n        axios({\n            method: 'get',\n            url: servicePath.getRecommandList+'?category_id=1',\n            cancelToken: source.token,\n        }).then(\n            res => {\n                setDataLoading(false)\n                console.log(res.data.data)\n                source.cancel('方法被取消');\n                for(let item in res.data.data){\n                    res.data.data[item].href=\"/detail?id=\"+res.data.data[item].id\n                }\n                setList(res.data.data)\n            }\n        ).catch(function (error) {\n            console.log(error)\n        });\n    }\n\n\n    useEffect(() => {\n        if (dataLoading) {\n            getLastArticle();\n        }\n    })\n\n\n    return (\n        <Card size=\"small\" loading={dataLoading} className=\"recommand\" extra={<a className=\"extra\" href=\"#\"><Icon type=\"ellipsis\" /></a>} \n        title={<div className=\"title\">\n            <Icon type=\"share-alt\" />\n            <span>最新文章</span>\n        </div>}>\n            <List\n                dataSource={list}\n                renderItem={item => (\n                    <List.Item className=\"re-item\" key={item.id}>\n                        <List.Item.Meta\n                            avatar={\n                                <Avatar style={{ borderRadius: '25%' }} src={item.fmt} />\n                            }\n                            title={<Ellipsis lines={2} tooltip><a className=\"btitle\" href={item.href}>{item.title}</a></Ellipsis>}\n                        />\n                    </List.Item>\n                )}>\n            </List>\n        </Card>\n    )\n}\n\nexport default Recommand"]},"metadata":{},"sourceType":"module"}