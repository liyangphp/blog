{"ast":null,"code":"import _List from \"antd/lib/list\";\nimport _Icon from \"antd/lib/icon\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Router from 'next/router';\nimport servicePath from '../config/apiUrl';\n\nconst UserArticleList = ({\n  userId\n}) => {\n  console.log('user_id', userId);\n  const {\n    0: listData,\n    1: setListData\n  } = useState([]);\n  const {\n    0: page,\n    1: setPage\n  } = useState(1);\n  const {\n    0: pageSize,\n    1: setPageSize\n  } = useState(9);\n  const {\n    0: total,\n    1: setTotal\n  } = useState(0);\n  const {\n    0: dataLoading,\n    1: setDataLoading\n  } = useState(true);\n\n  const getArticles = page => {\n    const CancelToken = axios.CancelToken;\n    const source = CancelToken.source();\n    let dataProps = '?category_id=1';\n    dataProps += '&pageSize=' + pageSize;\n    dataProps += '&page=' + page;\n    dataProps += '&user_id=' + userId;\n    axios({\n      method: 'get',\n      url: servicePath.getUserArticleList + dataProps,\n      cancelToken: source.token\n    }).then(res => {\n      console.log('res1', res);\n      setDataLoading(false);\n      source.cancel('方法被取消');\n\n      for (let item in res.data.data) {\n        res.data.data[item].biaoqian = res.data.data[item].biaoqian.split(\",\");\n        res.data.data[item].labes = res.data.data[item].biaoqian[0];\n        res.data.data[item].href = \"/detail?id=\" + res.data.data[item].id;\n      }\n\n      setListData(res.data.data);\n      setTotal(res.data.meta.total);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  const IconText = ({\n    type,\n    text\n  }) => __jsx(\"span\", null, __jsx(_Icon, {\n    type: type,\n    style: {\n      marginRight: 8\n    }\n  }), text);\n\n  useEffect(() => {\n    getArticles(page);\n  }, [page]);\n  return __jsx(_List, {\n    className: \"list\",\n    loading: dataLoading,\n    itemLayout: \"vertical\",\n    size: \"large\",\n    pagination: {\n      onChange: page => {\n        setPage(page);\n        getArticles(page);\n      },\n      pageSize: pageSize,\n      total: total\n    },\n    dataSource: listData,\n    renderItem: item => __jsx(_List.Item, {\n      style: {\n        border: '1px solid #e8e8e8'\n      },\n      className: \"list-item1\",\n      onClick: () => {\n        Router.push({\n          pathname: '/detail',\n          query: {\n            id: item.id\n          }\n        }, '/detail/' + item.id);\n      },\n      key: item.title,\n      actions: [__jsx(IconText, {\n        type: \"fire\",\n        text: item.watches,\n        key: \"list-vertical-fire\"\n      }), __jsx(IconText, {\n        type: \"like-o\",\n        text: item.stars,\n        key: \"list-vertical-like-o\"\n      }), __jsx(IconText, {\n        type: \"message\",\n        text: item.replies.length,\n        key: \"list-vertical-message\"\n      })],\n      extra: __jsx(\"img\", {\n        className: \"img\",\n        alt: item.title,\n        src: item.fmt\n      })\n    }, __jsx(_List.Item.Meta, {\n      style: {\n        marginTop: 42\n      },\n      title: __jsx(\"a\", null, item.title),\n      description: __jsx(\"div\", {\n        className: \"remark\"\n      }, __jsx(\"img\", {\n        className: \"avatar\",\n        style: {\n          borderRadius: '50%'\n        },\n        src: item.user.avatar\n      }), __jsx(\"div\", {\n        className: \"member\"\n      }, item.user.name), __jsx(\"div\", {\n        className: \"title\"\n      }, \"\\u53D1\\u5E03\\u65F6\\u95F4\"), __jsx(\"div\", {\n        className: \"time\"\n      }, item.created_at))\n    }), __jsx(\"div\", {\n      className: \"classifybox\"\n    }, __jsx(\"div\", {\n      className: \"classify\"\n    }, item.labes)), __jsx(\"div\", {\n      className: \"neirong\"\n    }, item.content))\n  });\n};\n\nexport default UserArticleList;","map":{"version":3,"sources":["/Users/mac/Desktop/liy-blog/components/UserArticleList.jsx"],"names":["React","useState","useEffect","axios","Router","servicePath","UserArticleList","userId","console","log","listData","setListData","page","setPage","pageSize","setPageSize","total","setTotal","dataLoading","setDataLoading","getArticles","CancelToken","source","dataProps","method","url","getUserArticleList","cancelToken","token","then","res","cancel","item","data","biaoqian","split","labes","href","id","meta","catch","error","IconText","type","text","marginRight","onChange","border","push","pathname","query","title","watches","stars","replies","length","fmt","marginTop","borderRadius","user","avatar","name","created_at","content"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport axios from 'axios'\nimport { List, Icon } from 'antd'\nimport Router from 'next/router'\nimport servicePath from '../config/apiUrl';\n\n\nconst UserArticleList = ({userId}) => {\n    console.log('user_id', userId)\n    const [listData, setListData ]= useState([]);\n    const [page, setPage] = useState(1)\n    const [pageSize, setPageSize] = useState(9)\n    const [total, setTotal] = useState(0)\n    const [dataLoading, setDataLoading] = useState(true)\n    const getArticles = (page) => {\n        const CancelToken = axios.CancelToken;\n        const source = CancelToken.source();\n        let dataProps='?category_id=1';\n        dataProps+='&pageSize='+pageSize;\n        dataProps+='&page='+page;\n        dataProps+='&user_id='+userId\n\n        axios({\n            method: 'get',\n            url: servicePath.getUserArticleList+dataProps,\n            cancelToken: source.token,\n        }).then(\n            res => {\n                console.log('res1',res)\n                setDataLoading(false)\n                source.cancel('方法被取消');\n                for(let item in res.data.data){\n                    res.data.data[item].biaoqian=res.data.data[item].biaoqian.split(\",\");\n                    res.data.data[item].labes = res.data.data[item].biaoqian[0];\n                    res.data.data[item].href=\"/detail?id=\"+res.data.data[item].id\n                }\n                setListData(res.data.data)\n                setTotal(res.data.meta.total)\n            }\n        ).catch(function (error) {\n            console.log(error)\n        });\n    }\n\n\n\n    const IconText = ({ type, text }) => (\n        <span>\n            <Icon type={type} style={{ marginRight: 8 }} />\n            {text}\n        </span>\n    );\n\n    useEffect(() => {\n        getArticles(page)\n    },[page])\n\n    return (\n        <List className=\"list\"\n            loading = {dataLoading}\n            itemLayout=\"vertical\"\n            size=\"large\"\n            pagination={{\n                onChange: page => {\n                    setPage(page)\n                    getArticles(page)\n                },\n                pageSize: pageSize,\n                total: total\n            }}\n            dataSource={listData}\n            renderItem={item => (\n                <List.Item style={{border:'1px solid #e8e8e8'}} className=\"list-item1\" onClick={() => { Router.push({pathname:'/detail',query:{id:item.id},},'/detail/'+item.id)  }} \n                    key={item.title}\n                    actions={[\n                        <IconText type=\"fire\" text={item.watches} key=\"list-vertical-fire\" />,\n                        <IconText type=\"like-o\" text={item.stars} key=\"list-vertical-like-o\" />,\n                        <IconText type=\"message\" text={item.replies.length} key=\"list-vertical-message\" />,\n                    ]}\n                    extra={\n                        <img\n                            className=\"img\"\n                            alt={item.title}\n                            src={item.fmt}\n                        />\n                    }\n                >\n                    <List.Item.Meta style={{ marginTop: 42 }}\n                        title={<a>{item.title}</a>}\n                        description={<div className=\"remark\">\n                            <img className=\"avatar\" style={{ borderRadius: '50%' }} src={item.user.avatar} />\n                            <div className=\"member\">{item.user.name}</div>\n                            <div className=\"title\">发布时间</div>\n                            <div className=\"time\">{item.created_at}</div>\n                        </div>}\n                    />\n                    <div className=\"classifybox\">\n                        <div className=\"classify\">{item.labes}</div>\n                    </div>\n\n\n                    <div className=\"neirong\">\n                        {item.content}\n                    </div>\n\n                </List.Item>\n            )}\n        />\n    )\n}\n\nexport default UserArticleList"]},"metadata":{},"sourceType":"module"}