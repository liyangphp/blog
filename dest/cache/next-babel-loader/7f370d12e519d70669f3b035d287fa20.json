{"ast":null,"code":"import _List from \"antd/lib/list\";\nimport _Avatar from \"antd/lib/avatar\";\nimport _Icon from \"antd/lib/icon\";\nimport _Card from \"antd/lib/card\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport servicePath from '../config/apiUrl';\nvar Meta = _Card.Meta;\n\nvar CodeList = function CodeList(_ref) {\n  var keywords = _ref.keywords,\n      labels = _ref.labels;\n\n  var _useState = useState(),\n      list = _useState[0],\n      setList = _useState[1];\n\n  var _useState2 = useState([]),\n      listData = _useState2[0],\n      setListData = _useState2[1];\n\n  var _useState3 = useState(1),\n      page = _useState3[0],\n      setPage = _useState3[1];\n\n  var _useState4 = useState(9),\n      pageSize = _useState4[0],\n      setPageSize = _useState4[1];\n\n  var _useState5 = useState(true),\n      isLoading = _useState5[0],\n      setIsLoading = _useState5[1];\n\n  var _useState6 = useState(0),\n      total = _useState6[0],\n      setTotal = _useState6[1];\n\n  var getArticles = function getArticles(page, labels, keywords) {\n    var CancelToken = axios.CancelToken;\n    var source = CancelToken.source();\n    var dataProps = '?category_id=4';\n    dataProps += '&pageSize=' + pageSize;\n    dataProps += '&page=' + page;\n\n    if (labels != '') {\n      dataProps += '&biaoqian=' + labels;\n    }\n\n    if (keywords != '') {\n      dataProps += '&q=' + keywords;\n    }\n\n    axios({\n      method: 'get',\n      url: servicePath.getArticleList + dataProps,\n      cancelToken: source.token\n    }).then(function (res) {\n      setIsLoading(false);\n      console.log(res.data.data);\n      source.cancel('方法被取消');\n\n      for (var item in res.data.data) {\n        res.data.data[item].href = \"/detail?id=\" + res.data.data[item].id;\n      }\n\n      setListData(res.data.data);\n      setTotal(res.data.meta.total);\n      setPage(page);\n    })[\"catch\"](function (error) {\n      console.log(error);\n    });\n  };\n\n  useEffect(function () {\n    getArticles(page, labels, keywords);\n  }, [page, labels, keywords]);\n  return __jsx(_List, {\n    className: \"list\",\n    style: {\n      marginTop: '1rem'\n    },\n    grid: {\n      gutter: 12,\n      column: 3\n    },\n    pagination: {\n      onChange: function onChange(page) {\n        getArticles(page, labels, keywords);\n      },\n      pageSize: pageSize,\n      total: total\n    },\n    dataSource: listData,\n    renderItem: function renderItem(item) {\n      return __jsx(_List.Item, {\n        className: \"list-item\"\n      }, __jsx(_Card, {\n        onClick: function onClick() {\n          window.location.href = item.href;\n        },\n        style: {\n          position: 'relative',\n          cursor: 'pointer',\n          borderRadius: 10,\n          overflow: 'hidden'\n        },\n        cover: __jsx(\"img\", {\n          style: {\n            height: 167,\n            objectFit: 'cover'\n          },\n          alt: \"example\",\n          src: item.fmt\n        }),\n        actions: [__jsx(\"a\", null, __jsx(_Icon, {\n          type: \"eye\"\n        }), \"\\xA0\\xA0\", __jsx(\"span\", null, item.watches)), __jsx(\"a\", null, __jsx(_Icon, {\n          type: \"file-zip\"\n        }), \"\\xA0\\xA0\", __jsx(\"span\", null, item.count)), __jsx(\"a\", null, __jsx(_Icon, {\n          type: \"download\"\n        }), \"\\xA0\\xA0\", __jsx(\"span\", null, \"\\u4E0B\\u8F7D\"))]\n      }, __jsx(Meta, {\n        title: item.title\n      }), __jsx(\"div\", {\n        className: \"js\",\n        style: {\n          marginTop: 20\n        }\n      }, __jsx(\"div\", {\n        className: \"jianshi\"\n      }, __jsx(_Avatar, {\n        src: item.user.avatar\n      }), __jsx(\"div\", {\n        className: \"mz\"\n      }, item.user.name)), __jsx(\"div\", {\n        className: \"f-right\",\n        style: {\n          marginTop: 8\n        }\n      }, \"\\u7C7B\\u578B\\uFF1A\", item.biaoqian)), __jsx(\"div\", {\n        className: \"classifybox\"\n      }, __jsx(\"div\", {\n        className: \"classify\"\n      }, item.biaoqian))));\n    }\n  });\n};\n\nexport default CodeList;","map":{"version":3,"sources":["/Users/mac/Desktop/liy-blog/components/CodeList.jsx"],"names":["React","useEffect","useState","axios","servicePath","Meta","CodeList","keywords","labels","list","setList","listData","setListData","page","setPage","pageSize","setPageSize","isLoading","setIsLoading","total","setTotal","getArticles","CancelToken","source","dataProps","method","url","getArticleList","cancelToken","token","then","res","console","log","data","cancel","item","href","id","meta","error","marginTop","gutter","column","onChange","window","location","position","cursor","borderRadius","overflow","height","objectFit","fmt","watches","count","title","user","avatar","name","biaoqian"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Icon, Card, Avatar, List } from 'antd';\nimport axios from 'axios'\nimport servicePath from '../config/apiUrl';\nconst { Meta } = Card;\nconst CodeList = ({ keywords, labels }) => {\n    const [list, setList] = useState()\n    const [listData, setListData] = useState([]);\n    const [page, setPage] = useState(1)\n    const [pageSize, setPageSize] = useState(9)\n    const [isLoading, setIsLoading] = useState(true)\n    const [total, setTotal] = useState(0)\n    const getArticles = (page, labels, keywords) => {\n        const CancelToken = axios.CancelToken;\n        const source = CancelToken.source();\n        let dataProps = '?category_id=4';\n        dataProps += '&pageSize=' + pageSize;\n        dataProps += '&page=' + page;\n        if (labels != '') {\n            dataProps += '&biaoqian=' + labels\n        }\n\n        if (keywords != '') {\n            dataProps += '&q=' + keywords\n        }\n        axios({\n            method: 'get',\n            url: servicePath.getArticleList + dataProps,\n            cancelToken: source.token,\n        }).then(\n            res => {\n                setIsLoading(false)\n                console.log(res.data.data)\n                source.cancel('方法被取消');\n                for (let item in res.data.data) {\n                    res.data.data[item].href = \"/detail?id=\" + res.data.data[item].id\n\n                }\n                setListData(res.data.data)\n                setTotal(res.data.meta.total)\n                setPage(page)\n\n            }\n        ).catch(function (error) {\n            console.log(error)\n        });\n    }\n\n    useEffect(() => {\n        getArticles(page, labels, keywords)\n    }, [page, labels, keywords])\n\n    return (\n        <List className=\"list\" style={{ marginTop: '1rem' }}\n            grid={{ gutter: 12, column: 3 }}\n            pagination={{\n                onChange: page => {\n                    getArticles(page, labels, keywords)\n                },\n                pageSize: pageSize,\n                total: total\n            }}\n            dataSource={listData}\n            renderItem={item => (\n                <List.Item className=\"list-item\">\n                    <Card onClick={() => { window.location.href = item.href }} style={{ position: 'relative', cursor: 'pointer', borderRadius: 10, overflow: 'hidden' }}\n                        cover={\n                            <img style={{ height: 167, objectFit: 'cover' }}\n                                alt=\"example\"\n                                src={item.fmt}\n                            />\n                        }\n                        actions={[\n                            <a><Icon type=\"eye\" />&nbsp;&nbsp;<span>{item.watches}</span></a>,\n                            <a><Icon type=\"file-zip\" />&nbsp;&nbsp;<span>{item.count}</span></a>,\n                            <a><Icon type=\"download\" />&nbsp;&nbsp;<span>下载</span></a>,\n                        ]}\n                    >\n\n                        <Meta\n                            title={item.title}\n                        />\n\n\n                        <div className=\"js\" style={{ marginTop: 20 }}>\n                            <div className=\"jianshi\">\n                                <Avatar src={item.user.avatar} />\n                                <div className=\"mz\">{item.user.name}</div>\n                            </div>\n                            <div className=\"f-right\" style={{ marginTop: 8 }}>\n                                类型：{item.biaoqian}\n                            </div>\n                        </div>\n                        <div className=\"classifybox\">\n                            <div className=\"classify\">{item.biaoqian}</div>\n                        </div>\n                    </Card>\n                </List.Item>\n            )}\n        />\n    )\n}\n\nexport default CodeList"]},"metadata":{},"sourceType":"module"}