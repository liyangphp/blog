{"ast":null,"code":"import _List from \"antd/lib/list\";\nimport _Avatar from \"antd/lib/avatar\";\nimport _Icon from \"antd/lib/icon\";\nimport _Card from \"antd/lib/card\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nconst {\n  Meta\n} = _Card;\n\nconst CodeList = () => {\n  const {\n    0: list,\n    1: setList\n  } = useState();\n  const {\n    0: listData,\n    1: setListData\n  } = useState([]);\n  const {\n    0: page,\n    1: setPage\n  } = useState(1);\n  const {\n    0: pageSize,\n    1: setPageSize\n  } = useState(9);\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(true);\n  const {\n    0: total,\n    1: setTotal\n  } = useState(0);\n  const arr = [];\n\n  const getArticles = page => {\n    const CancelToken = axios.CancelToken;\n    const source = CancelToken.source();\n    let dataProps = '?category_id=4';\n    dataProps += '&pageSize=' + pageSize;\n    dataProps += '&page=' + page;\n\n    if (arr.length != 0 || arr[1] != \"undefined\") {\n      dataProps += '&p=' + decodeURI(arr[1]);\n    }\n\n    axios({\n      method: 'get',\n      url: servicePath.getArticleList + dataProps,\n      cancelToken: source.token\n    }).then(res => {\n      setIsLoading(false);\n      console.log(res.data.data);\n      source.cancel('方法被取消');\n\n      for (let item in res.data.data) {\n        res.data.data[item].href = \"/detail?id=\" + res.data.data[item].id;\n      }\n\n      setListData(res.data.data);\n      setTotal(res.data.meta.total);\n      setPage(page);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  useEffect(() => {\n    if (isLoading) {\n      getArticles(page);\n    }\n  });\n  return __jsx(_List, {\n    style: {\n      margin: '0 auto'\n    },\n    grid: {\n      gutter: 12,\n      column: 3\n    },\n    pagination: {\n      onChange: page => {\n        console.log(page);\n\n        if (str) {\n          searchArticles(str, page);\n        } else {\n          getArticles(page);\n        }\n      },\n      pageSize: pageSize,\n      total: total\n    },\n    dataSource: listData,\n    renderItem: item => __jsx(_List.Item, {\n      className: \"list-item\"\n    }, __jsx(_Card, {\n      onClick: () => {\n        window.location.href = item.href;\n      },\n      style: {\n        position: 'relative',\n        cursor: 'pointer',\n        borderRadius: 10,\n        overflow: 'hidden'\n      },\n      cover: __jsx(\"img\", {\n        style: {\n          height: 167,\n          objectFit: 'cover'\n        },\n        alt: \"example\",\n        src: item.fmt\n      }),\n      actions: [__jsx(\"a\", null, __jsx(_Icon, {\n        type: \"eye\"\n      }), \"\\xA0\\xA0\", __jsx(\"span\", null, item.watches)), __jsx(\"a\", null, __jsx(_Icon, {\n        type: \"file-zip\"\n      }), \"\\xA0\\xA0\", __jsx(\"span\", null, item.count, \"M\")), __jsx(\"a\", null, __jsx(_Icon, {\n        type: \"download\"\n      }), \"\\xA0\\xA0\", __jsx(\"span\", null, \"\\u4E0B\\u8F7D\"))]\n    }, __jsx(Meta, {\n      title: item.title\n    }), __jsx(\"div\", {\n      className: \"js\",\n      style: {\n        marginTop: 20\n      }\n    }, __jsx(\"div\", {\n      className: \"jianshi\"\n    }, __jsx(_Avatar, {\n      src: item.user.avatar\n    }), __jsx(\"div\", {\n      className: \"mz\"\n    }, item.user.name)), __jsx(\"div\", {\n      className: \"f-right\",\n      style: {\n        marginTop: 8\n      }\n    }, \"\\u7C7B\\u578B\\uFF1A\", item.biaoqian)), __jsx(\"div\", {\n      className: \"classifybox\"\n    }, __jsx(\"div\", {\n      className: \"classify\"\n    }, item.biaoqian))))\n  });\n};\n\nexport default CodeList;","map":{"version":3,"sources":["/Users/mac/Desktop/liy-blog/components/CodeList.jsx"],"names":["React","useEffect","useState","axios","Meta","CodeList","list","setList","listData","setListData","page","setPage","pageSize","setPageSize","isLoading","setIsLoading","total","setTotal","arr","getArticles","CancelToken","source","dataProps","length","decodeURI","method","url","servicePath","getArticleList","cancelToken","token","then","res","console","log","data","cancel","item","href","id","meta","catch","error","margin","gutter","column","onChange","str","searchArticles","window","location","position","cursor","borderRadius","overflow","height","objectFit","fmt","watches","count","title","marginTop","user","avatar","name","biaoqian"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport {Icon, Card, Avatar, List} from 'antd';\nimport axios from 'axios'\nconst { Meta } = Card;\nconst CodeList = () => {\n    const [list, setList] = useState()\n    const [listData,setListData ]= useState([]);\n    const [page, setPage] = useState(1)\n    const [pageSize, setPageSize] = useState(9)\n    const [isLoading, setIsLoading] = useState(true)\n    const [total, setTotal] = useState(0)\n    const arr = []\n    const getArticles = (page) => {\n        const CancelToken = axios.CancelToken;\n        const source = CancelToken.source();\n        let dataProps='?category_id=4';\n        dataProps+='&pageSize='+pageSize;\n        dataProps+='&page='+page;\n        if(arr.length!=0||arr[1]!=\"undefined\"){\n            dataProps+='&p='+decodeURI(arr[1])\n        }\n        axios({\n            method: 'get',\n            url: servicePath.getArticleList+dataProps,\n            cancelToken: source.token,\n        }).then(\n            res => {\n                setIsLoading(false)\n                console.log(res.data.data)\n                source.cancel('方法被取消');\n                for(let item in res.data.data){\n                    res.data.data[item].href=\"/detail?id=\"+res.data.data[item].id\n\n                }\n                setListData(res.data.data)\n                setTotal(res.data.meta.total)\n                setPage(page)\n\n            }\n        ).catch(function (error) {\n            console.log(error)\n        });\n    }\n\n    useEffect(() => {\n        if (isLoading) {\n            getArticles(page)\n        }\n    })\n\n    return (\n        <List style={{ margin: '0 auto' }}\n            grid={{ gutter: 12, column: 3 }}\n            pagination={{\n                onChange: page => {\n                    console.log(page)\n\n                    if (str) {\n                        searchArticles(str, page)\n                    } else {\n                        getArticles(page)\n                    }\n                },\n                pageSize: pageSize,\n                total: total\n            }}\n            dataSource={listData}\n            renderItem={item => (\n                <List.Item className=\"list-item\">\n                    <Card onClick={() => { window.location.href = item.href }} style={{ position: 'relative', cursor: 'pointer', borderRadius: 10, overflow: 'hidden' }}\n                        cover={\n                            <img style={{ height: 167, objectFit: 'cover' }}\n                                alt=\"example\"\n                                src={item.fmt}\n                            />\n                        }\n                        actions={[\n                            <a><Icon type=\"eye\" />&nbsp;&nbsp;<span>{item.watches}</span></a>,\n                            <a><Icon type=\"file-zip\" />&nbsp;&nbsp;<span>{item.count}M</span></a>,\n                            <a><Icon type=\"download\" />&nbsp;&nbsp;<span>下载</span></a>,\n                        ]}\n                    >\n\n                        <Meta\n                            title={item.title}\n                        />\n\n\n                        <div className=\"js\" style={{ marginTop: 20 }}>\n                            <div className=\"jianshi\">\n                                <Avatar src={item.user.avatar} />\n                                <div className=\"mz\">{item.user.name}</div>\n                            </div>\n                            <div className=\"f-right\" style={{ marginTop: 8 }}>\n                                类型：{item.biaoqian}\n                            </div>\n                        </div>\n                        <div className=\"classifybox\">\n                            <div className=\"classify\">{item.biaoqian}</div>\n                        </div>\n                    </Card>\n                </List.Item>\n            )}\n        />\n    )\n}\n\nexport default CodeList"]},"metadata":{},"sourceType":"module"}